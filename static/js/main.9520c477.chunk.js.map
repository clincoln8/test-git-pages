{"version":3,"sources":["Header.js","Assertion.js","GraphNode.js","ParseMCF.js","Home.js","DisplayNode.js","App.js","serviceWorker.js","index.js"],"names":["Header","handleSearch","event","keyCode","props","setAppState","target","value","type","onKeyUp","this","placeholder","Component","Assertion","src","property","provenance","nextAssertion","assertions","Object","invNextAssertion","invAssertions","source","label","valueObj","Node","getNode","console","log","addAssertion","dcid","API_ROOT","alreadyFetched","curNode","getRemotePropertyLabels","then","allLabels","a","getRemotePropertyValues","valueList","createAssertionFromValueObj","createInvAssertionFromValueObj","createp","existing","nodeHash","newNode","obj","getLabelsRemoteTarget","fetch","res","json","data","JSON","parse","out","getValuesRemoteTarget","bothDirections","subjNodes","ParseMCF","file","fileReader","FileReader","readAsText","Promise","rej","addEventListener","result","lines","split","line","parseLine","startsWith","length","prop","splitLineOnColon","val","node","values","lineSplitOnColon","splitValsByComma","slice","join","forEach","rawVal","trim","includes","readNodeValue","push","replace","lineSplitByColon","prevNode","shouldReadLine","readPropLabel","readDCID","readPropValues","Home","onSubmitPress","home","readFile","state","fileList","subjList","setState","localDCIDList","keys","onClearPress","localStorage","clear","render","className","id","onChange","files","name","accept","required","onClick","map","key","appState","getValueCell","isNode","window","location","href","ROOT_URL","AssertionTable","asserts","assert","index","InvAssertionTable","invAsserts","DisplayNode","fetchRemoteData","assertList","invAssertList","invAssert","App","hash","curDCID","self","searchDCID","URLSearchParams","get","Boolean","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.9520c477.chunk.js","sourcesContent":["import React, {Component} from 'react';\n\nclass Header extends Component {\n  handleSearch = event =>{\n    if (event.keyCode === 13){\n      this.props.setAppState(event.target.value)\n    }\n  }\n  render(){\n    return(\n      <div>\n        <input type=\"search\" onKeyUp={this.handleSearch}\n         placeholder=\"Search for a dcid...\" />\n      </div>\n    )\n  }\n}\n\nexport default Header\n","import Node from './GraphNode.js'\n\nclass Assertion {\n  constructor(src, property, target, provenance) {\n    this.src = src;\n    this.property = property;\n    this.provenance = provenance;\n    this.target = target;\n    this.nextAssertion = src.assertions;\n    src.assertions = this;\n\n    if (target instanceof Object) {\n      this.invNextAssertion = target.invAssertions;\n      target.invAssertions = this;\n    }\n  }\n  static addAssertion(src, property, target, provenance){\n    new Assertion(src, property, target, provenance)\n  }\n\n  static createAssertionFromValueObj(source, label, valueObj){\n    let target;\n    if ('dcid' in valueObj) {\n      target = Node.getNode(valueObj['dcid'], true);\n    } else if ('value' in valueObj) {\n      target = valueObj['value'];\n    } else{\n      console.log(\"Node has no 'dcid' or 'value' prop: \" +  valueObj);\n    }\n    //console.log('Creating new Assertion');\n    //console.log('src: ' + source.dcid + ', prop: ' + label + ', target: ' +\n    //target.dcid +  ', prov: ' + valueObj['provenanceId']);\n    Assertion.addAssertion(source, label, target,\n      valueObj['provenanceId']);\n    }\n\n    static createInvAssertionFromValueObj(target, label, valueObj){\n      let source;\n      if ('dcid' in valueObj) {\n        source = Node.getNode(valueObj['dcid'], true);\n      } else{\n        console.log(\"Node has no 'dcid' for inverse: \" +  valueObj);\n      }\n      //console.log('Creating new Inv Assertion');\n      console.log('src: ' + source.dcid + ', prop: ' + label + ', target: ' +\n      target.dcid +  ', prov: ' + valueObj['provenanceId']);\n      Assertion.addAssertion(source, label, target,\n        valueObj['provenanceId']);\n      }\n}\nexport default Assertion;\n","import Assertion from './Assertion.js'\n\nconst API_ROOT = 'https://api.datacommons.org';\n\n// JS representation of a single Node in the KG\nclass Node {\n  constructor (dcid) {\n    this.dcid = dcid;\n    this.alreadyFetched = false;\n  }\n\n  static getNode (dcid, createp) {\n    var existing = Node.nodeHash[dcid];\n    if (existing) {\n      return existing;\n    } else if (createp) {\n      var newNode = new Node(dcid);\n      Node.nodeHash[dcid] = newNode;\n      return newNode;\n    } else {\n      return null;\n    }\n  }\n\n  static isNode(obj){\n    return obj instanceof Node;\n  }\n\n  async fetchRemoteData(){\n    const curNode = this;\n    if (!curNode.alreadyFetched){\n\n      await getRemotePropertyLabels(curNode.dcid)\n      .then(async allLabels => {\n        // create Assertions for each triple current node is source\n        for(const label of allLabels['outLabels']) {\n          await getRemotePropertyValues(curNode.dcid, label, true)\n          .then( valueList => {\n            if(!valueList) {\n              console.log('ERROR: could not find value for node: '+ curNode.dcid +\n              ', label: ' + label);\n              return;\n            }\n            for(const valueObj of valueList) {\n              Assertion.createAssertionFromValueObj(curNode, label, valueObj);\n            }\n          });\n        }\n        // create Inverse Assertion for each triple current node is target\n        for (const label of allLabels['inLabels']) {\n          console.log(label)\n          await getRemotePropertyValues(curNode.dcid, label, false)\n          .then( valueList => {\n            for( const valueObj of valueList) {\n            Assertion.createInvAssertionFromValueObj(curNode, label, valueObj);\n          }\n        })\n      }\n    });\n      curNode.alreadyFetched = true;\n    }\n  }\n}\n\nNode.nodeHash = {};\nNode.subjNodes = {};\n\nfunction getLabelsRemoteTarget(dcid){\n  let target = (API_ROOT + '/node/property-labels?dcids=' + dcid)\n  return target;\n}\n\nfunction getValuesRemoteTarget(dcid, property, out){\n  let target = (API_ROOT + '/node/property-values?dcids=' + dcid +\n  '&property=' +   property + '&direction=');\n  if (out){\n    target += 'out'\n  } else{\n    target += 'in'\n  }\n  target += '&limit=500';\n  return target;\n}\n\nfunction getRemotePropertyLabels(dcid){\n  const target = getLabelsRemoteTarget(dcid);\n  return fetch(target)\n  .then( res => res.json())\n  .then( data => JSON.parse(data['payload'])[dcid]);\n}\n\nfunction getRemotePropertyValues(dcid, label, out){\n  const target = getValuesRemoteTarget(dcid, label, out);\n  return fetch(target)\n  .then( res => res.json())\n  .then( data => JSON.parse(data['payload'])[dcid])\n  .then( bothDirections => {\n    console.log('url: ' + target + ', values: ' + bothDirections )\n    if (out){\n      return bothDirections['out'];\n    } else{\n      return bothDirections['in'];\n    }\n  });\n}\n\nexport default Node;\n\n//TODO switch subjNodes to list, not set?\n// Todo typeOf:schema:drug is causing too many colons error --> need to fix\n","import Assertion from './Assertion.js'\nimport Node from './GraphNode.js'\n\nconst LOCAL_PROVENANCE = 'local mcf';\n\n\nclass ParseMCF{\n\n  static readFile(file){\n    const fileReader = new FileReader();\n    fileReader.readAsText(file);\n    return new Promise( (res,rej) => {\n      fileReader.addEventListener(\"loadend\", result => {\n        console.log(result);\n        console.log(fileReader.result);\n        const lines = fileReader.result.split('\\n');\n        let curNode;\n        for (const line of lines){\n          console.log(line);\n          curNode = ParseMCF.parseLine(line, curNode);\n          console.log(curNode);\n        }\n        res(Node.subjNodes);\n      });\n      fileReader.addEventListener('error', rej);\n    });\n  }\n\n  static shouldReadLine(line){\n    if (line.startsWith('#') || line.startsWith(\"//\") || line.length === 0){\n      return false;\n    }\n    return true;\n  }\n\n  static readPropLabel(line){\n    let prop;\n    let splitLineOnColon = line.split(':');\n    if (splitLineOnColon.length < 2){\n      console.log('Line does not contain colon: ' + line);\n      // TODO change to MCF Syntax Error\n      return prop;\n    }\n    prop = splitLineOnColon[0];\n    return prop;\n  }\n\n static readNodeValue(val){\n    let node;\n    if(val.split(':').length === 2 && val.split(':')[0] === 'dcid'){\n      const dcid = val.split(':')[1];\n      node = Node.getNode(dcid, true); //TODO might cause duplicate triples here by pushing to list\n      return node;\n    } else{\n      console.log('Incorrect number of colons in node declaration: ' + val);\n      // TODO change to MCF Syntax Error\n      return node;\n    }\n  }\n\n  static readPropValues(line){\n    let values;\n    let lineSplitOnColon = line.split(':');\n    if (lineSplitOnColon.length < 2 || lineSplitOnColon[1] === ''){\n      console.log('Line does not contain value: ' + line);\n      // TODO change to MCF Syntax Error\n      return values;\n    }\n    const splitValsByComma = lineSplitOnColon.slice(1).join(':').split(',');\n    values = [];\n    splitValsByComma.forEach( rawVal => {\n      let val = rawVal.trim();\n      if(val.includes(':')){\n        val = ParseMCF.readNodeValue(val);\n        if (val) values.push(val);\n      } else{\n        values.push(val.replace(/\"/g, ''));\n      }\n    });\n    return values\n  }\n\n  static readDCID(line){\n    let dcid;\n    const lineSplitByColon = line.split(':');\n    if (lineSplitByColon.length !== 3){\n      console.log('Node declaration, incorrect num of colons: ' + line);\n      return dcid;\n    }\n    return lineSplitByColon[lineSplitByColon.length -1].trim();\n  }\n\n  //TODO check for ill formatted lines!!\n  static parseLine(line, prevNode){\n    let curNode;\n    if( prevNode) curNode = prevNode;\n    line = line.trim();\n    if(ParseMCF.shouldReadLine(line)){\n      let prop = ParseMCF.readPropLabel(line);\n      if (!prop) return curNode;\n      if (prop === 'Node'){\n        let dcid = ParseMCF.readDCID(line);\n        if (!dcid) return curNode;\n        curNode = Node.getNode(dcid, true);\n        if (! (dcid in Node.subjNodes)){\n          Node.subjNodes[dcid] = curNode;\n        }\n        return curNode;\n      }\n      let values = ParseMCF.readPropValues(line);\n      if (!values) return curNode;\n\n      values.forEach(value => Assertion.addAssertion(curNode, prop, value,\n        LOCAL_PROVENANCE));\n      }\n      return curNode;\n    }\n}\nexport default ParseMCF;\n","\nimport React, {Component} from 'react';\nimport Node from './GraphNode.js';\nimport ParseMCF from './ParseMCF.js'\n\nclass Home extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      localDCIDList: this.props.appState.subjNodes,\n      fileList: null,\n    }\n  }\n\n  onSubmitPress = () => {\n    const home = this;\n\n    ParseMCF.readFile(this.state.fileList[0]).then( subjList => {\n      home.setState({localDCIDList:Object.keys(subjList)});\n      })\n\n  };\n\n  onClearPress = () => {\n    const home = this;\n    home.setState({localDCIDList:[]});\n    localStorage.clear();\n  }\n  render = () =>{\n    return (\n      <div>\n      <div className=\"App\">\n      <header className=\"App-header\">\n      <h3>Upload an MCF file to preview it in Data Commons.</h3>\n      <div>\n      <input id=\"file-select\" onChange={ event => this.state.fileList = event.target.files }\n        type=\"file\" name=\"UploadFile\" accept=\".mcf\" required />\n      <br></br>\n      <button id='submitFile' onClick={this.onSubmitPress} >Submit</button>\n      <br></br>\n      <button id='clearFile' onClick={this.onClearPress} >Clear</button>\n      </div>\n      </header>\n      </div>\n      <ul>{this.state.localDCIDList.map( dcid =>\n        <li key={dcid} onClick={() => this.props.setAppState(dcid)}>{dcid}</li>\n        )}</ul>\n      </div>\n    );\n  }\n}\nexport default Home;\n","import Node from './GraphNode.js';\nimport React, {Component} from 'react';\nconst ROOT_URL = 'http://penguin.linux.test:3000/'\n\nfunction getValueCell(target){\n  if(Node.isNode(target)){\n    return (<td onClick={() => (window.location.href = ROOT_URL + '?dcid=' +\n      target.dcid)}>{target.dcid}</td>);\n  } else{\n    return (<td>{target}</td>)\n  }\n}\n\nclass AssertionTable extends Component{\n  render = () => {\n    return (\n      <table>\n      <thead><tr>\n      <th>property</th>\n      <th>target</th>\n      <th>provenance</th>\n      </tr></thead>\n    <tbody>{this.props.asserts.map( (assert,index) => {\n        return (\n          <tr  key={assert.property +  index}>\n          <td>{assert.property}</td>\n          {getValueCell(assert.target)}\n          <td>{assert.provenance}</td>\n          </tr>\n        );\n      })}</tbody>\n      </table>\n    )\n  }\n}\n\nclass InvAssertionTable extends Component{\n  render = () => {\n    return (\n      <table>\n      <thead><tr>\n      <th>source</th>\n      <th>property</th>\n      <th>provenance</th>\n      </tr></thead>\n    <tbody>{this.props.invAsserts.map( (assert,index) => {\n        return (\n          <tr  key={assert.property +  index}>\n          {getValueCell(assert.src)}\n          <td>{assert.property}</td>\n          <td>{assert.provenance}</td>\n          </tr>\n        );\n      })}</tbody>\n      </table>\n    )\n  }\n}\n\nclass DisplayNode extends Component{\n  constructor(props)\n  {\n    super(props);\n    this.state = {\n      dcid: this.props.dcid,\n      asserts:[],\n      invAsserts: []\n    }\n    console.log('render ' + this.props.dcid)\n  }\n    componentDidMount(){\n\n      let curNode = Node.getNode(this.state.dcid, true);\n      curNode.fetchRemoteData(curNode).then( () => {\n        let assert = curNode.assertions;\n        const assertList = [];\n        const invAssertList = [];\n\n        while(assert){\n          assertList.push(assert);\n          assert = assert.nextAssertion;\n        }\n        let invAssert = curNode.invAssertions;\n        console.log(curNode);\n        while(invAssert){\n          invAssertList.push(invAssert);\n          invAssert = invAssert.invNextAssertion;\n          console.log(invAssertList);\n        }\n        this.setState({asserts:assertList, invAsserts:invAssertList});\n    });\n  }\n\n  render = () => {\n    return(\n      <div>\n      <h1>Display node: {this.state.dcid}</h1>\n      <h3>Assertions</h3>\n      <p><u>source: {this.state.dcid}</u></p>\n      <AssertionTable asserts={this.state.asserts}/>\n      <br></br>\n      <h3>Inverse Assertions</h3>\n      <p><u>target: {this.state.dcid}</u></p>\n      <InvAssertionTable invAsserts={this.state.invAsserts}/>\n\n      </div>\n    );\n  }\n}\nexport default DisplayNode;\n","import React, {Component} from 'react';\nimport './App.css';\n\nimport Header from './Header.js'\nimport Home from './Home.js';\nimport DisplayNode from './DisplayNode.js';\nconst ROOT_URL = 'https://clincoln8.github.io/test-git-pages/'\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      subjNodes:[],\n      nodeHash: [],\n      curDCID:null,\n    }\n  }\n  componentDidMount(){\n    const self = this;\n\n    window.addEventListener('hashchange', () => {\n      console.log('in listener' + window.location.hash)\n      let params = new URLSearchParams(window.location.hash.split(\"#\")[1]);\n      let searchDCID = params.get('dcid');\n      if (searchDCID) {\n        self.setState({curDCID:searchDCID});\n      } else{\n        self.setState({curDCID:null});\n      }\n\n      console.log(self.state.curDCID)\n    }, false);\n  }\n\n  setAppState = (dcid) => {\n    window.location.hash = '#dcid=' + dcid;\n  }\n\n\n  render = () => {\n\n    if (window.location.href === ROOT_URL) return (\n      <div>\n      <Header setAppState={this.setAppState}/>\n      <Home setAppState={this.setAppState} appState={this.state}/>\n      </div>\n    );\n    if (this.state.curDCID){\n      console.log('from render: ' + this.state.curDCID)\n     return(\n      <div>\n      <Header setAppState={this.setAppState}/>\n      <DisplayNode key={this.state.curDCID} appState={this.state} dcid={this.state.curDCID}/>\n      </div>\n    );\n  }\n\n/*\n    const search = (window.location.href).replace(ROOT_URL, '');\n    let params = new URLSearchParams(search);\n    let searchDCID = params.get('dcid');\n    if (searchDCID) return (<DisplayNode appState={this.state} dcid={searchDCID}/>);\n*/\n    return (\n\n      <h2>Requested url could not be found</h2>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconsole.log('render from index.js')\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}